{% comment %}
A reusable component for displaying post images
Usage:
  {% include post_image.liquid 
    filename="image.jpg" 
    alt="Image description"
    caption="Optional caption text"
    max_width="500px" 
    width="70%" 
    centered="true"
  %}
{% endcomment %}

{% if page.image_path %}
  {% assign full_path = page.image_path | append: "/" | append: include.filename %}
{% else %}
  {% assign post_id = page.date | date: "%Y-%m-%d" | append: "-" | append: page.title | slugify %}
  {% assign full_path = "assets/img/post/" | append: post_id | append: "/" | append: include.filename %}
{% endif %}

{% assign loading_value = include.loading | default: "lazy" %}
{% assign class_value = include.class | default: "img-fluid rounded z-depth-1" %}

<!-- Debug: {{ full_path }} -->

<div class="row mt-3">
  <div class="col-sm mt-3 mt-md-0 {% if include.centered %}text-center{% endif %}">
    {% include figure.liquid 
      loading=loading_value
      path=full_path 
      class=class_value
      alt=include.alt 
      width=include.width 
      max-width=include.max_width 
      style=include.style
    %}
  </div>
</div>
{% if include.caption %}
<div class="caption {% if include.centered %}text-center{% endif %}">
  {{ include.caption }}
</div>
{% endif %} 